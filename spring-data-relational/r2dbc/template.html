<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Data Access API :: Spring Data Relational</title>
    <link rel="prev" href="core.html">
    <link rel="next" href="repositories.html">
    <meta name="generator" content="Antora 3.2.0-alpha.2">
    <script>
!function (theme, navWidth) {
  if (theme === 'dark') document.documentElement.classList.add('dark-theme')
  if (navWidth) document.documentElement.style.setProperty('--nav-width', `${navWidth}px`)
}(localStorage && localStorage.getItem('theme') || (matchMedia('(prefers-color-scheme: dark)') && 'dark'),
  localStorage && localStorage.getItem('nav-width'))
    </script>
    <link rel="stylesheet" href="../_/css/site.css">
    <link rel="stylesheet" href="../_/css/vendor/search.css">
    <link rel="stylesheet" href="../_/css/vendor/asciidoctor-tabs.css">

    <meta name="version" content="3.2.0">
    <meta name="component" content="data-relational">
    <link rel="icon" href="../_/img/favicon.ico" type="image/vnd.microsoft.icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="https://spring.io">
        <img
          id="springlogo"
          class="block"
          src="../_/img/spring-logo.svg"
          alt="Spring"
        />
      </a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Why Spring</a>
          <div class="navbar-dropdown">
            <a
              class="navbar-item"
              href="https://spring.io/why-spring"
            >Overview</a>
            <a
              class="navbar-item"
              href="https://spring.io/microservices"
            >Microservices</a>
            <a
              class="navbar-item"
              href="https://spring.io/reactive"
            >Reactive</a>
            <a class="navbar-item" href="https://spring.io/event-driven">Event
              Driven</a>
            <a class="navbar-item" href="https://spring.io/cloud">Cloud</a>
            <a class="navbar-item" href="https://spring.io/web-applications">Web
              Applications</a>
            <a
              class="navbar-item"
              href="https://spring.io/serverless"
            >Serverless</a>
            <a class="navbar-item" href="https://spring.io/batch">Batch</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Learn</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://spring.io/learn">Overview</a>
            <a
              class="navbar-item"
              href="https://spring.io/quickstart"
            >Quickstart</a>
            <a class="navbar-item" href="https://spring.io/guides">Guides</a>
            <a class="navbar-item" href="https://spring.io/blog">Blog</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Projects</a>
          <div class="navbar-dropdown" style="min-width: 280px">
            <a
              class="navbar-item"
              href="https://spring.io/projects"
            >Overview</a>
            <a
              class="navbar-item"
              href="https://spring.io/projects/spring-boot"
            >Spring Boot</a>
            <a
              class="navbar-item"
              href="https://spring.io/projects/spring-framework"
            >Spring Framework</a>
            <a
              class="navbar-item"
              href="https://spring.io/projects/spring-cloud"
            >Spring Cloud</a>
            <a
              class="navbar-item"
              href="https://spring.io/projects/spring-cloud-dataflow"
            >Spring Cloud Data Flow</a>
            <a
              class="navbar-item"
              href="https://spring.io/projects/spring-data"
            >Spring Data</a>
            <a
              class="navbar-item"
              href="https://spring.io/projects/spring-integration"
            >Spring Integration</a>
            <a
              class="navbar-item"
              href="https://spring.io/projects/spring-batch"
            >Spring Batch</a>
            <a
              class="navbar-item"
              href="https://spring.io/projects/spring-security"
            >Spring Security</a>
            <a
              class="navbar-item navbar-item-special"
              href="https://spring.io/projects"
            >View all projects</a>
            <a class="navbar-item" href="https://spring.io/tools">Spring Tools 4</a>
            <a
              class="navbar-item navbar-item-special-2"
              href="https://start.spring.io"
            >Spring Initializr
              <svg
                class="external-link-icon"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 16 16"
              ><polyline
                  points="15 10.94 15 15 1 15 1 1 5.06 1"
                  fill="none"
                  stroke="currentColor"
                  stroke-miterlimit="10"
                  stroke-width="2"
                ></polyline><polyline
                  points="8.93 1 15 1 15 7.07"
                  fill="none"
                  stroke="currentColor"
                  stroke-miterlimit="10"
                  stroke-width="2"
                ></polyline><line
                  x1="15"
                  y1="1"
                  x2="8"
                  y2="8"
                  fill="none"
                  stroke="currentColor"
                  stroke-miterlimit="10"
                  stroke-width="2"
                ></line></svg></a>
          </div>
        </div>

        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Academy</a>
          <div class="navbar-dropdown">
            <a
              class="navbar-item"
              href="https://spring.academy/courses"
            >Courses</a>
            <a
              class="navbar-item"
              href="https://spring.academy/learning-path"
            >Get Certified</a>
          </div>
        </div>

        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Support</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="https://spring.io/support">Overview</a>
            <a class="navbar-item" href="https://spring.io/security">Security
              Advisories</a>
          </div>
        </div>

        <div class="navbar-item has-dropdown is-hoverable is-community">
          <a class="navbar-link" href="#">Community</a>
          <div class="navbar-dropdown">
            <a
              class="navbar-item"
              href="https://spring.io/community"
            >Overview</a>
            <a class="navbar-item" href="https://spring.io/events">Events</a>
            <a class="navbar-item" href="https://spring.io/team">Team</a>
          </div>
        </div>
      </div>
    </div>
    <label class="theme-toggler">
      <input
        type="checkbox"
        type="checkbox"
        id="switch-theme-checkbox"
        name="switch-theme-checkbox"
      />
      <span class="icon"><svg
          aria-hidden="true"
          focusable="false"
          data-prefix="fas"
          data-icon="moon"
          class="svg-inline--fa fa-moon moon"
          role="img"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 384 512"
        ><path
            fill="currentColor"
            d="M223.5 32C100 32 0 132.3 0 256S100 480 223.5 480c60.6 0 115.5-24.2 155.8-63.4c5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-9.8 1.7-19.8 2.6-30.1 2.6c-96.9 0-175.5-78.8-175.5-176c0-65.8 36-123.1 89.3-153.3c6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-6.3-.5-12.6-.8-19-.8z"
          ></path>
        </svg>
        <svg
          aria-hidden="true"
          focusable="false"
          data-prefix="fas"
          data-icon="sun"
          class="svg-inline--fa fa-sun sun"
          role="img"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 512 512"
        ><path
            fill="currentColor"
            d="M361.5 1.2c5 2.1 8.6 6.6 9.6 11.9L391 121l107.9 19.8c5.3 1 9.8 4.6 11.9 9.6s1.5 10.7-1.6 15.2L446.9 256l62.3 90.3c3.1 4.5 3.7 10.2 1.6 15.2s-6.6 8.6-11.9 9.6L391 391 371.1 498.9c-1 5.3-4.6 9.8-9.6 11.9s-10.7 1.5-15.2-1.6L256 446.9l-90.3 62.3c-4.5 3.1-10.2 3.7-15.2 1.6s-8.6-6.6-9.6-11.9L121 391 13.1 371.1c-5.3-1-9.8-4.6-11.9-9.6s-1.5-10.7 1.6-15.2L65.1 256 2.8 165.7c-3.1-4.5-3.7-10.2-1.6-15.2s6.6-8.6 11.9-9.6L121 121 140.9 13.1c1-5.3 4.6-9.8 9.6-11.9s10.7-1.5 15.2 1.6L256 65.1 346.3 2.8c4.5-3.1 10.2-3.7 15.2-1.6zM160 256a96 96 0 1 1 192 0 96 96 0 1 1 -192 0zm224 0a128 128 0 1 0 -256 0 128 128 0 1 0 256 0z"
          ></path>
        </svg></span>
      <span class="text">light</span>
    </label>
  </nav>
</header>
<script>
!function (theme) {
  if (theme === 'dark') {
    document.getElementById('switch-theme-checkbox').parentElement.classList.add('active')
  }
}(localStorage && localStorage.getItem('theme') || (matchMedia('(prefers-color-scheme: dark)') && 'dark'))
</script><div class="body">
<div class="nav-container" data-component="data-relational" data-version="3.2.0">
  <aside class="nav">
    <div class="panels">
      <div class="nav-panel-menu is-active" data-panel="menu">
        <nav class="nav-menu">
<div class="context">
  <span class="title">Spring Data Relational</span>
  <span class="version">3.2.0-SNAPSHOT</span>
  <button class="browse-version" id="browse-version">
    <svg
      height="24px"
      id="Layer_1"
      style="enable-background:new 0 0 512 512;"
      version="1.1"
      viewBox="0 0 512 512"
      width="24px"
      xml:space="preserve"
    ><g><path
          d="M256,224c-17.7,0-32,14.3-32,32s14.3,32,32,32c17.7,0,32-14.3,32-32S273.7,224,256,224L256,224z"
        ></path><path
          d="M128.4,224c-17.7,0-32,14.3-32,32s14.3,32,32,32c17.7,0,32-14.3,32-32S146,224,128.4,224L128.4,224z"
        ></path><path
          d="M384,224c-17.7,0-32,14.3-32,32s14.3,32,32,32s32-14.3,32-32S401.7,224,384,224L384,224z"
        ></path></g></svg>
  </button>
</div><ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../index.html">Overview</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../commons/upgrade.html">Upgrading Spring Data</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../repositories/introduction.html">Introduction</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../repositories/core-concepts.html">Core concepts</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../repositories/definition.html">Defining Repository Interfaces</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../repositories/create-instances.html">Creating Repository Instances</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../repositories/query-methods-details.html">Defining Query Methods</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../repositories/projections.html">Projections</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../object-mapping.html">Object Mapping Fundamentals</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../commons/custom-conversions.html">Custom Conversions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../repositories/custom-implementations.html">Custom Implementations for Spring Data Repositories</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../repositories/core-domain-events.html">Publishing Events from Aggregate Roots</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../commons/entity-callbacks.html">Entity Callbacks</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../repositories/core-extensions.html">Spring Data Extensions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../repositories/null-handling.html">Null Handling of Repository Methods</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../repositories/query-keywords-reference.html">Repository query keywords</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../repositories/query-return-types-reference.html">Repository query return types</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../jdbc.html">JDBC</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../jdbc/why.html">Why Spring Data JDBC?</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../jdbc/domain-driven-design.html">Domain Driven Design and Relational Databases</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../jdbc/getting-started.html">Getting Started</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../jdbc/examples-repo.html">Examples Repository</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../jdbc/configuration.html">Configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../jdbc/entity-persistence.html">Persisting Entities</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../jdbc/loading-aggregates.html">Loading Aggregates</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../jdbc/query-methods.html">Query Methods</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../jdbc/mybatis.html">MyBatis Integration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../jdbc/events.html">Lifecycle Events</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../jdbc/logging.html">Logging</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../jdbc/transactions.html">Transactionality</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../jdbc/auditing.html">JDBC Auditing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../jdbc/mapping.html">Mapping</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../jdbc/custom-conversions.html">Custom Conversions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../jdbc/locking.html">JDBC Locking</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../query-by-example.html">Query by Example</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../jdbc/schema-support.html">Schema Creation</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../r2dbc.html">R2DBC</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="getting-started.html">Getting Started</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="core.html">R2DBC Core Support</a>
  </li>
  <li class="nav-item is-current-page" data-depth="2">
    <a class="nav-link" href="template.html">Data Access API</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="repositories.html">R2DBC Repositories</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="query-methods.html">Query Methods</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="entity-callbacks.html">EntityCallbacks</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="auditing.html">Auditing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="mapping.html">Mapping</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="query-by-example.html">Query By Example</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="kotlin.html">Kotlin</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="migration-guide.html">Migration Guide</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../kotlin.html">Kotlin Support</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../kotlin/requirements.html">Requirements</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../kotlin/null-safety.html">Null Safety</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../kotlin/object-mapping.html">Object Mapping</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../kotlin/extensions.html">Extensions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../kotlin/coroutines.html">Coroutines</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="https://github.com/spring-projects/spring-data-commons/wiki">Wiki</a>
  </li>
</ul>
  </li>
</ul>
          <div class="toggle-sm">
            <button id="nav-toggle-2" class="nav-toggle"></button>
          </div>
        </nav>
      </div>
      <div class="nav-collapse">
        <button id="nav-collapse-toggle"><span></span></button>        
      </div>
    </div>
    <div class="nav-resize"></div>
  </aside>
</div>
<script>
!function (sidebar) {
  if (sidebar) {
    document.body.classList.add('nav-sm')
  }
}(localStorage && localStorage.getItem('sidebar') === 'close')
</script><main class="article">
<div class="toolbar" role="navigation">
  <button id="nav-toggle-1" class="nav-toggle"></button>
</div>
  <div class="content">
<aside class="sidebar">
  <div class="content">
    <div
      class="toc"
      data-title="Data Access API"
      data-levels="2"
    >
      <div class="toc-menu"></div>
    </div>
    <div class="sidebar-links">
        <a href="file:///Users/mpaluch/git/data/spring-data-jdbc/src/main/antora/modules/ROOT/pages/r2dbc/template.adoc">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            height="24"
            viewBox="0 0 24 24"
            width="24"
          ><path
              d="m16 2.012 3 3L16.713 7.3l-3-3zM4 14v3h3l8.299-8.287-3-3zm0 6h16v2H4z"
            ></path></svg>
          Edit this Page
        </a>
        <a href="https://github.com/spring-projects/spring-data-jdbc" title="Github">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            height="512px"
            id="Layer_1"
            version="1.1"
            viewBox="0 0 512 512"
            width="512px"
          ><style type="text/css"><![CDATA[
              .st0{fill-rule:evenodd;clip-rule:evenodd;} ]]></style><g><path
                class="st0"
                d="M256,32C132.3,32,32,134.8,32,261.7c0,101.5,64.2,187.5,153.2,217.9c11.2,2.1,15.3-5,15.3-11.1   c0-5.5-0.2-19.9-0.3-39.1c-62.3,13.9-75.5-30.8-75.5-30.8c-10.2-26.5-24.9-33.6-24.9-33.6c-20.3-14.3,1.5-14,1.5-14   c22.5,1.6,34.3,23.7,34.3,23.7c20,35.1,52.4,25,65.2,19.1c2-14.8,7.8-25,14.2-30.7c-49.7-5.8-102-25.5-102-113.5   c0-25.1,8.7-45.6,23-61.6c-2.3-5.8-10-29.2,2.2-60.8c0,0,18.8-6.2,61.6,23.5c17.9-5.1,37-7.6,56.1-7.7c19,0.1,38.2,2.6,56.1,7.7   c42.8-29.7,61.5-23.5,61.5-23.5c12.2,31.6,4.5,55,2.2,60.8c14.3,16.1,23,36.6,23,61.6c0,88.2-52.4,107.6-102.3,113.3   c8,7.1,15.2,21.1,15.2,42.5c0,30.7-0.3,55.5-0.3,63c0,6.1,4,13.3,15.4,11C415.9,449.1,480,363.1,480,261.7   C480,134.8,379.7,32,256,32z"
              ></path></g></svg>
          Github Project
        </a>
    </div>
  </div>
</aside><div class="doc">
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../index.html">Spring Data Relational</a></li>
    <li><a href="../r2dbc.html">R2DBC</a></li>
    <li><a href="template.html">Data Access API</a></li>
  </ul>
</nav>
<article>
<h1 id="page-title" class="page">Data Access API</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><code>R2dbcEntityTemplate</code> is the central entrypoint for Spring Data R2DBC.
It provides direct entity-oriented methods and a more narrow, fluent interface for typical ad-hoc use-cases, such as querying, inserting, updating, and deleting data.</p>
</div>
<div class="paragraph">
<p>The entry points (<code>insert()</code>, <code>select()</code>, <code>update()</code>, and others) follow a natural naming schema based on the operation to be run.
Moving on from the entry point, the API is designed to offer only context-dependent methods that lead to a terminating method that creates and runs a SQL statement.
Spring Data R2DBC uses a <code>R2dbcDialect</code> abstraction to determine bind markers, pagination support and the data types natively supported by the underlying driver.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
All terminal methods return always a <code>Publisher</code> type that represents the desired operation.
The actual statements are sent to the database upon subscription.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="r2dbc.entityoperations.save-insert"><a class="anchor" href="#r2dbc.entityoperations.save-insert"></a>Methods for Inserting and Updating Entities</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There are several convenient methods on <code>R2dbcEntityTemplate</code> for saving and inserting your objects.
To have more fine-grained control over the conversion process, you can register Spring converters with <code>R2dbcCustomConversions</code>&#8201;&#8212;&#8201;for example  <code>Converter&lt;Person, OutboundRow&gt;</code> and <code>Converter&lt;Row, Person&gt;</code>.</p>
</div>
<div class="paragraph">
<p>The simple case of using the save operation is to save a POJO. In this case, the table name is determined by name (not fully qualified) of the class.
You may also call the save operation with a specific collection name.
You can use mapping metadata to override the collection in which to store the object.</p>
</div>
<div class="paragraph">
<p>When inserting or saving, if the <code>Id</code> property is not set, the assumption is that its value will be auto-generated by the database.
Consequently, for auto-generation the type of the <code>Id</code> property or field in your class must be a <code>Long</code>, or <code>Integer</code>.</p>
</div>
<div class="paragraph">
<p>The following example shows how to insert a row and retrieving its contents:</p>
</div>
<div class="exampleblock">
<div class="title">Example 1. Inserting and retrieving entities using the <code>R2dbcEntityTemplate</code></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Person person = new Person("John", "Doe");

Mono&lt;Person&gt; saved = template.insert(person);
Mono&lt;Person&gt; loaded = template.selectOne(query(where("firstname").is("John")),
		Person.class);</code></pre>
</div>
</div>
</div>
</div>
<div class="paragraph">
<p>The following insert and update operations are available:</p>
</div>
<div class="paragraph">
<p>A similar set of insert operations is also available:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Mono&lt;T&gt;</code> <strong>insert</strong> <code>(T objectToSave)</code>: Insert the object to the default table.</p>
</li>
<li>
<p><code>Mono&lt;T&gt;</code> <strong>update</strong> <code>(T objectToSave)</code>: Insert the object to the default table.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Table names can be customized by using the fluent API.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="r2dbc.entityoperations.selecting"><a class="anchor" href="#r2dbc.entityoperations.selecting"></a>Selecting Data</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>select(…)</code> and <code>selectOne(…)</code> methods on <code>R2dbcEntityTemplate</code> are used to select data from a table.
Both methods take a <a href="#r2dbc.datbaseclient.fluent-api.criteria"><code>Query</code></a> object that defines the field projection, the <code>WHERE</code> clause, the <code>ORDER BY</code> clause and limit/offset pagination.
Limit/offset functionality is transparent to the application regardless of the underlying database.
This functionality is supported by the <a href="core.html#r2dbc.drivers" class="xref page"><code>R2dbcDialect</code> abstraction</a> to cater for differences between the individual SQL flavors.</p>
</div>
<div class="exampleblock">
<div class="title">Example 2. Selecting entities using the <code>R2dbcEntityTemplate</code></div>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Flux&lt;Person&gt; loaded = template.select(query(where("firstname").is("John")),
		Person.class);</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="r2dbc.entityoperations.fluent-api"><a class="anchor" href="#r2dbc.entityoperations.fluent-api"></a>Fluent API</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This section explains the fluent API usage.
Consider the following simple query:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Flux&lt;Person&gt; people = template.select(Person.class) <i class="conum" data-value="1"></i><b>(1)</b>
		.all(); <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Using <code>Person</code> with the <code>select(…)</code> method maps tabular results on <code>Person</code> result objects.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Fetching <code>all()</code> rows returns a <code>Flux&lt;Person&gt;</code> without limiting results.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="paragraph">
<p>The following example declares a more complex query that specifies the table name by name, a <code>WHERE</code> condition, and an <code>ORDER BY</code> clause:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Mono&lt;Person&gt; first = template.select(Person.class)	<i class="conum" data-value="1"></i><b>(1)</b>
	.from("other_person")
	.matching(query(where("firstname").is("John")			<i class="conum" data-value="2"></i><b>(2)</b>
		.and("lastname").in("Doe", "White"))
	  .sort(by(desc("id"))))													<i class="conum" data-value="3"></i><b>(3)</b>
	.one();																						<i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Selecting from a table by name returns row results using the given domain type.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The issued query declares a <code>WHERE</code> condition on <code>firstname</code> and <code>lastname</code> columns to filter results.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Results can be ordered by individual column names, resulting in an <code>ORDER BY</code> clause.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Selecting the one result fetches only a single row.
This way of consuming rows expects the query to return exactly a single result.
<code>Mono</code> emits a <code>IncorrectResultSizeDataAccessException</code> if the query yields more than a single result.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
You can directly apply <a href="../repositories/projections.html" class="xref page">Projections</a> to results by providing the target type via <code>select(Class&lt;?&gt;)</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can switch between retrieving a single entity and retrieving multiple entities through the following terminating methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>first()</code>: Consume only the first row, returning a <code>Mono</code>.
The returned <code>Mono</code> completes without emitting an object if the query returns no results.</p>
</li>
<li>
<p><code>one()</code>: Consume exactly one row, returning a <code>Mono</code>.
The returned <code>Mono</code> completes without emitting an object if the query returns no results.
If the query returns more than one row, <code>Mono</code> completes exceptionally emitting <code>IncorrectResultSizeDataAccessException</code>.</p>
</li>
<li>
<p><code>all()</code>: Consume all returned rows returning a <code>Flux</code>.</p>
</li>
<li>
<p><code>count()</code>: Apply a count projection returning <code>Mono&lt;Long&gt;</code>.</p>
</li>
<li>
<p><code>exists()</code>: Return whether the query yields any rows by returning <code>Mono&lt;Boolean&gt;</code>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can use the <code>select()</code> entry point to express your <code>SELECT</code> queries.
The resulting <code>SELECT</code> queries support the commonly used clauses (<code>WHERE</code> and <code>ORDER BY</code>) and support pagination.
The fluent API style let you chain together multiple methods while having easy-to-understand code.
To improve readability, you can use static imports that let you avoid using the 'new' keyword for creating <code>Criteria</code> instances.</p>
</div>
<div class="sect2">
<h3 id="r2dbc.datbaseclient.fluent-api.criteria"><a class="anchor" href="#r2dbc.datbaseclient.fluent-api.criteria"></a>Methods for the Criteria Class</h3>
<div class="paragraph">
<p>The <code>Criteria</code> class provides the following methods, all of which correspond to SQL operators:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Criteria</code> <strong>and</strong> <code>(String column)</code>: Adds a chained <code>Criteria</code> with the specified <code>property</code> to the current <code>Criteria</code> and returns the newly created one.</p>
</li>
<li>
<p><code>Criteria</code> <strong>or</strong> <code>(String column)</code>: Adds a chained <code>Criteria</code> with the specified <code>property</code> to the current <code>Criteria</code> and returns the newly created one.</p>
</li>
<li>
<p><code>Criteria</code> <strong>greaterThan</strong> <code>(Object o)</code>: Creates a criterion by using the <code>&gt;</code> operator.</p>
</li>
<li>
<p><code>Criteria</code> <strong>greaterThanOrEquals</strong> <code>(Object o)</code>: Creates a criterion by using the <code>&gt;=</code> operator.</p>
</li>
<li>
<p><code>Criteria</code> <strong>in</strong> <code>(Object&#8230;&#8203; o)</code>: Creates a criterion by using the <code>IN</code> operator for a varargs argument.</p>
</li>
<li>
<p><code>Criteria</code> <strong>in</strong> <code>(Collection&lt;?&gt; collection)</code>: Creates a criterion by using the <code>IN</code> operator using a collection.</p>
</li>
<li>
<p><code>Criteria</code> <strong>is</strong> <code>(Object o)</code>: Creates a criterion by using column matching (<code>property = value</code>).</p>
</li>
<li>
<p><code>Criteria</code> <strong>isNull</strong> <code>()</code>: Creates a criterion by using the <code>IS NULL</code> operator.</p>
</li>
<li>
<p><code>Criteria</code> <strong>isNotNull</strong> <code>()</code>: Creates a criterion by using the <code>IS NOT NULL</code> operator.</p>
</li>
<li>
<p><code>Criteria</code> <strong>lessThan</strong> <code>(Object o)</code>: Creates a criterion by using the <code>&lt;</code> operator.</p>
</li>
<li>
<p><code>Criteria</code> <strong>lessThanOrEquals</strong> <code>(Object o)</code>: Creates a criterion by using the <code>&#8656;</code> operator.</p>
</li>
<li>
<p><code>Criteria</code> <strong>like</strong> <code>(Object o)</code>: Creates a criterion by using the <code>LIKE</code> operator without escape character processing.</p>
</li>
<li>
<p><code>Criteria</code> <strong>not</strong> <code>(Object o)</code>: Creates a criterion by using the <code>!=</code> operator.</p>
</li>
<li>
<p><code>Criteria</code> <strong>notIn</strong> <code>(Object&#8230;&#8203; o)</code>: Creates a criterion by using the <code>NOT IN</code> operator for a varargs argument.</p>
</li>
<li>
<p><code>Criteria</code> <strong>notIn</strong> <code>(Collection&lt;?&gt; collection)</code>: Creates a criterion by using the <code>NOT IN</code> operator using a collection.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can use <code>Criteria</code> with <code>SELECT</code>, <code>UPDATE</code>, and <code>DELETE</code> queries.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="r2dbc.entityoperations.fluent-api.insert"><a class="anchor" href="#r2dbc.entityoperations.fluent-api.insert"></a>Inserting Data</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can use the <code>insert()</code> entry point to insert data.</p>
</div>
<div class="paragraph">
<p>Consider the following simple typed insert operation:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Mono&lt;Person&gt; insert = template.insert(Person.class)	<i class="conum" data-value="1"></i><b>(1)</b>
		.using(new Person("John", "Doe")); <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Using <code>Person</code> with the <code>into(…)</code> method sets the <code>INTO</code> table, based on mapping metadata.
It also prepares the insert statement to accept <code>Person</code> objects for inserting.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Provide a scalar <code>Person</code> object.
Alternatively, you can supply a <code>Publisher</code> to run a stream of <code>INSERT</code> statements.
This method extracts all non-<code>null</code> values and inserts them.</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="r2dbc.entityoperations.fluent-api.update"><a class="anchor" href="#r2dbc.entityoperations.fluent-api.update"></a>Updating Data</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can use the <code>update()</code> entry point to update rows.
Updating data starts by specifying the table to update by accepting <code>Update</code> specifying assignments.
It also accepts <code>Query</code> to create a <code>WHERE</code> clause.</p>
</div>
<div class="paragraph">
<p>Consider the following simple typed update operation:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Person modified = …

		Mono&lt;Long&gt; update = template.update(Person.class)	<i class="conum" data-value="1"></i><b>(1)</b>
				.inTable("other_table")														<i class="conum" data-value="2"></i><b>(2)</b>
				.matching(query(where("firstname").is("John")))		<i class="conum" data-value="3"></i><b>(3)</b>
				.apply(update("age", 42));												<i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Update <code>Person</code> objects and apply mapping based on mapping metadata.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Set a different table name by calling the <code>inTable(…)</code> method.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Specify a query that translates into a <code>WHERE</code> clause.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Apply the <code>Update</code> object.
Set in this case <code>age</code> to <code>42</code> and return the number of affected rows.</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="r2dbc.entityoperations.fluent-api.delete"><a class="anchor" href="#r2dbc.entityoperations.fluent-api.delete"></a>Deleting Data</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can use the <code>delete()</code> entry point to delete rows.
Removing data starts with a specification of the table to delete from and, optionally, accepts a <code>Criteria</code> to create a <code>WHERE</code> clause.</p>
</div>
<div class="paragraph">
<p>Consider the following simple insert operation:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">		Mono&lt;Long&gt; delete = template.delete(Person.class)	<i class="conum" data-value="1"></i><b>(1)</b>
				.from("other_table")															<i class="conum" data-value="2"></i><b>(2)</b>
				.matching(query(where("firstname").is("John")))		<i class="conum" data-value="3"></i><b>(3)</b>
				.all();																						<i class="conum" data-value="4"></i><b>(4)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Delete <code>Person</code> objects and apply mapping based on mapping metadata.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Set a different table name by calling the <code>from(…)</code> method.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Specify a query that translates into a <code>WHERE</code> clause.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Apply the delete operation and return the number of affected rows.</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="core.html">R2DBC Core Support</a></span>
  <span class="next"><a href="repositories.html">R2DBC Repositories</a></span>
</nav>
</article>
</div>  </div>
</main>
<div class="modal micromodal-slide" id="modal-versions" aria-hidden="true">
    <div class="modal__overlay" tabindex="-1" data-micromodal-close>
        <div class="modal__container" role="dialog" aria-modal="true">
            <main class="modal__content" id="modal-versions-content">
              <button data-micromodal-close class="modal-versions-close">
                <svg width="28px" height="28px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><defs><style>.cls-1{fill:none;stroke:#000;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px;}</style></defs><title/><g id="cross"><line class="cls-1" x1="7" x2="25" y1="7" y2="25"/><line class="cls-1" x1="7" x2="25" y1="25" y2="7"/></g></svg>
              </button>
              <div class="colset">
                <div class="col-left">
                  <ul class="nav-versions">
                    <li class="component">
                      <a class="title" href="../data-commons/index.html">Spring Data Commons</a>
                      <ul class="versions">
                        <li class="version is-latest">
                          <a href="../data-commons/index.html">
                            3.2.0-SNAPSHOT<span class="current">current</span>
                          </a>
                        </li>
                      </ul>
                    </li>
                    <li class="component is-current">
                      <a class="title" href="../index.html">Spring Data Relational</a>
                      <ul class="versions">
                        <li class="version is-current is-latest">
                          <a href="../index.html">
                            3.2.0-SNAPSHOT<span class="current">current</span>
                          </a>
                        </li>
                      </ul>
                    </li>
                  </ul>
                </div>
                <div class="col-right">
                  <ul>
                    <li>
                      Related Spring Documentation
                      <ul>
                        <li><a href="https://docs.spring.io/spring-framework/reference/">Spring Framework</a></li>
                        <li><a href="https://docs.spring.io/spring-security/reference/">Spring Security</a></li>
                        <li><a href="https://docs.spring.io/spring-ldap/reference/">Spring LDAP</a></li>
                        <li><a href="https://docs.spring.io/spring-session/reference/">Spring Session</a></li>
                        <li><a href="https://docs.spring.io/spring-authorization-server/reference/">Spring Authorization Server</a></li>
                      </ul>
                    </li>
                  </ul>
                </div>
              </div>
            </main>
        </div>
    </div>
</div>

</div>
<footer class="footer flex">
    <div id="spring-links flex">
        <img id="springlogo" src="../_/img/spring-logo.svg" alt="Spring">
        <p class="smallest antialiased">© <script>var d = new Date();
        document.write(d.getFullYear());</script> <a href="https://www.vmware.com/">VMware</a>, Inc. or its affiliates. <a href="https://www.vmware.com/help/legal.html">Terms of Use</a> • <a href="https://www.vmware.com/help/privacy.html" rel="noopener noreferrer">Privacy</a> • <a href="https://spring.io/trademarks">Trademark Guidelines</a> <span id="thank-you-mobile">• <a href="https://spring.io/thank-you">Thank you</a></span> • <a href="https://www.vmware.com/help/privacy/california-privacy-rights.html">Your California Privacy Rights</a> • <a class="ot-sdk-show-settings">Cookie Settings</a> <span id="teconsent"></span></p>
        <p class="smallest antialiased has-gray-text">Apache®, Apache Tomcat®, Apache Kafka®, Apache Cassandra&trade;, and Apache Geode&trade; are trademarks or registered trademarks of the Apache Software Foundation in the United States and/or other countries. Java&trade;, Java&trade; SE, Java&trade; EE, and OpenJDK&trade; are trademarks of Oracle and/or its affiliates. Kubernetes® is a registered trademark of the Linux Foundation in the United States and other countries. Linux® is the registered trademark of Linus Torvalds in the United States and other countries. Windows® and Microsoft® Azure are registered trademarks of Microsoft Corporation. “AWS” and “Amazon Web Services” are trademarks or registered trademarks of Amazon.com Inc. or its affiliates. All other trademarks and copyrights are property of their respective owners and are only mentioned for informative purposes. Other names may be trademarks of their respective owners.</p>
    </div>
    <div id="social-icons" class="flex jc-between">
        <a href="https://www.youtube.com/user/SpringSourceDev" title="Youtube"><svg id="youtube-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 40 40"><circle class="cls-1" cx="20" cy="20" r="20"/><path class="cls-2" d="M30.91,14.53a2.89,2.89,0,0,0-2-2C27.12,12,20,12,20,12s-7.12,0-8.9.47a2.9,2.9,0,0,0-2,2A30.56,30.56,0,0,0,8.63,20a30.44,30.44,0,0,0,.46,5.47,2.89,2.89,0,0,0,2,2C12.9,28,20,28,20,28s7.12,0,8.9-.47a2.87,2.87,0,0,0,2-2A30.56,30.56,0,0,0,31.37,20,28.88,28.88,0,0,0,30.91,14.53ZM17.73,23.41V16.59L23.65,20Z"/></svg></a>
        <a href="https://github.com/spring-projects" title="Github"><svg id="github-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 75.93 75.93"><path class="cls-1" d="M38,0a38,38,0,1,0,38,38A38,38,0,0,0,38,0Z"/></g><path class="cls-2" d="M38,15.59A22.95,22.95,0,0,0,30.71,60.3c1.15.21,1.57-.5,1.57-1.11s0-2,0-3.9c-6.38,1.39-7.73-3.07-7.73-3.07A6.09,6.09,0,0,0,22,48.86c-2.09-1.42.15-1.39.15-1.39a4.81,4.81,0,0,1,3.52,2.36c2,3.5,5.37,2.49,6.67,1.91a4.87,4.87,0,0,1,1.46-3.07c-5.09-.58-10.45-2.55-10.45-11.34a8.84,8.84,0,0,1,2.36-6.15,8.29,8.29,0,0,1,.23-6.07s1.92-.62,6.3,2.35a21.82,21.82,0,0,1,11.49,0c4.38-3,6.3-2.35,6.3-2.35a8.29,8.29,0,0,1,.23,6.07,8.84,8.84,0,0,1,2.36,6.15c0,8.81-5.37,10.75-10.48,11.32a5.46,5.46,0,0,1,1.56,4.25c0,3.07,0,5.54,0,6.29s.42,1.33,1.58,1.1A22.94,22.94,0,0,0,38,15.59Z"/></svg></a>
        <a href="https://twitter.com/springcentral" title="Twitter"><svg id="twitter-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 75.93 75.93"><circle class="cls-1" cx="37.97" cy="37.97" r="37.97"/><path id="Twitter-2" data-name="Twitter" class="cls-2" d="M55.2,22.73a15.43,15.43,0,0,1-4.88,1.91,7.56,7.56,0,0,0-5.61-2.49A7.78,7.78,0,0,0,37,30a7.56,7.56,0,0,0,.2,1.79,21.63,21.63,0,0,1-15.84-8.23,8,8,0,0,0,2.37,10.52,7.66,7.66,0,0,1-3.48-1v.09A7.84,7.84,0,0,0,26.45,41a7.54,7.54,0,0,1-2,.28A7.64,7.64,0,0,1,23,41.09a7.71,7.71,0,0,0,7.18,5.47,15.21,15.21,0,0,1-9.55,3.37,15.78,15.78,0,0,1-1.83-.11,21.41,21.41,0,0,0,11.78,3.54c14.13,0,21.86-12,21.86-22.42,0-.34,0-.68,0-1a15.67,15.67,0,0,0,3.83-4.08,14.9,14.9,0,0,1-4.41,1.24A7.8,7.8,0,0,0,55.2,22.73Z"/></svg></a>
    </div>
</footer>
<script src="../_/js/vendor/import.js"></script>
<script src="../_/js/site.js"></script>
<script async src="../_/js/vendor/highlight.js"></script>
<script async src="../_/js/vendor/asciidoctor-tabs.js" data-sync-storage-key="docs:preferred-tab"></script>
  </body>
</html>
